<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒ ãƒ€ãƒƒãƒ—ï¼ˆMUDAPPï¼‰</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f0f0; /* å…¨ä½“çš„ã«æ˜ã‚‹ã„ã‚°ãƒ¬ãƒ¼ã®èƒŒæ™¯ */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 1rem;
            overflow: hidden; /* ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ã‚’éè¡¨ç¤º */
        }
        .container {
            background-color: #ffffff; /* ç™½ã„ã‚«ãƒ¼ãƒ‰èƒŒæ™¯ */
            border-radius: 1.5rem; /* è§’ã‚’ã•ã‚‰ã«ä¸¸ã */
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1); /* å½±ã‚’å¼·åŒ– */
            width: 100%;
            max-width: 420px; /* ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ã«ãƒ•ã‚£ãƒƒãƒˆã™ã‚‹æœ€å¤§å¹… */
            padding: 2.5rem 1.5rem; /* ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã‚’å¢—ã‚„ã™ */
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            gap: 1.5rem; /* è¦ç´ é–“ã®ã‚¹ãƒšãƒ¼ã‚¹ */
            transition: all 0.3s ease-in-out; /* å…¨ä½“ã®ãƒˆãƒ©ãƒ³ã‚¸ã‚·ãƒ§ãƒ³ */
        }

        /* ç„¡é§„ãƒœã‚¿ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        #uselessButton {
            width: 100%;
            padding: 1.5rem 2rem;
            font-size: 1.8rem; /* ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºã‚’å¤§ãã */
            font-weight: 700; /* å¤ªå­— */
            color: #ffffff;
            background-color: #ef4444; /* èµ¤ç³»ã®ãƒœã‚¿ãƒ³ */
            border: none;
            border-radius: 1.5rem; /* ä¸¸ã¿ã‚’å¼·èª¿ */
            box-shadow: 0 8px 0 #dc2626; /* ç«‹ä½“çš„ãªãƒœã‚¿ãƒ³ã®å½± */
            cursor: pointer;
            outline: none;
            transition: all 0.1s ease-in-out; /* æŠ¼ã—ãŸæ™‚ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
            letter-spacing: 0.05em; /* æ–‡å­—é–“éš”ã‚’å°‘ã—åºƒã’ã‚‹ */
        }

        #uselessButton:active {
            transform: translateY(4px); /* æŠ¼ã—ãŸæ™‚ã«å°‘ã—æ²ˆã‚€ */
            box-shadow: 0 4px 0 #dc2626;
        }

        /* ã‚»ãƒªãƒ•è¡¨ç¤ºã‚¨ãƒªã‚¢ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        #dialogueDisplay {
            min-height: 8rem; /* é«˜ã•ã‚’ç¢ºä¿ã—ã¦ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã®å´©ã‚Œã‚’é˜²ã */
            background-color: #f9fafb; /* èƒŒæ™¯è‰² */
            border: 1px solid #e5e7eb; /* æ ç·š */
            border-radius: 0.75rem; /* è§’ã‚’ä¸¸ã */
            padding: 1rem 1.25rem;
            font-size: 1.2rem; /* å°‘ã—å¤§ãã */
            color: #374151; /* æ¿ƒã„ã‚ã®ã‚°ãƒ¬ãƒ¼ */
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            line-height: 1.6;
            transition: opacity 0.3s ease-in-out;
            width: 100%; /* å¹…ã„ã£ã±ã„ã«åºƒã’ã‚‹ */
        }

        /* éŸ³å£°é¸æŠã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .voice-control {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            width: 100%;
        }
        .voice-control label {
            font-size: 0.9rem;
            color: #6b7280;
            font-weight: 600;
        }
        .voice-control select {
            width: 100%;
            padding: 0.6rem 0.8rem;
            border: 1px solid #d1d5db;
            border-radius: 0.5rem;
            background-color: #ffffff;
            font-size: 1rem;
            color: #374151;
            appearance: none; /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®çŸ¢å°ã‚’éè¡¨ç¤º */
            background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%236b7280%22%20d%3D%22M287%2069.9L146.2%20208.6%205.4%2069.9z%22%2F%3E%3C%2Fsvg%3E'); /* ã‚«ã‚¹ã‚¿ãƒ çŸ¢å° */
            background-repeat: no-repeat;
            background-position: right 0.8rem center;
            background-size: 0.8em;
            transition: all 0.2s ease-in-out;
            cursor: pointer;
        }
        .voice-control select:focus {
            outline: none;
            border-color: #3b82f6; /* ãƒ•ã‚©ãƒ¼ã‚«ã‚¹æ™‚ã®è‰² */
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3);
        }

        /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³ã®èª¿æ•´ */
        @media (max-width: 640px) {
            .container {
                padding: 2rem 1rem; /* ã‚¹ãƒãƒ›ã§ã¯ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã‚’å°‘ã—æ¸›ã‚‰ã™ */
                gap: 1.25rem;
            }
            #uselessButton {
                font-size: 1.5rem; /* ã‚¹ãƒãƒ›ã§ã¯ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºã‚’èª¿æ•´ */
                padding: 1.2rem 1.5rem;
            }
            #dialogueDisplay {
                font-size: 1rem; /* ã‚¹ãƒãƒ›ã§ã¯ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºã‚’èª¿æ•´ */
                min-height: 7rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="text-3xl font-bold text-gray-800 mb-4">ğŸŒ€ ãƒ ãƒ€ãƒƒãƒ—</h1>
        <p class="text-sm text-gray-500 mb-6">ä»Šä¸–ã§ä¸€ç•ªç„¡é§„ãªã‚¢ãƒ—ãƒª</p>

        <button id="uselessButton">æŠ¼ã—ã¦ã‚‚ç„¡é§„ã ã‚ˆ</button>

        <div id="dialogueDisplay" class="flex items-center justify-center p-4 bg-gray-50 rounded-xl text-gray-700 text-lg font-medium text-center shadow-inner">
            ã“ã“ã«ç„¡é§„ã‚»ãƒªãƒ•ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚
        </div>

        <div class="voice-control">
            <label for="voiceSelect">éŸ³å£°ãƒˆãƒ¼ãƒ³ã‚’é¸æŠï¼š</label>
            <select id="voiceSelect">
                <!-- JavaScriptã§ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒè¿½åŠ ã•ã‚Œã¾ã™ -->
            </select>
        </div>
    </div>

    <script>
        // ç„¡é§„ã‚»ãƒªãƒ•ã®é…åˆ—
        const uselessDialogues = [
            "ãŠã‚ã§ã¨ã†ã€‚æ™‚é–“ã®æµªè²»ã«æˆåŠŸã—ã¾ã—ãŸã€‚",
            "ã“ã®ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ãŸæ™‚é–“ã€ã‚‚ã†æˆ»ã£ã¦ãã¾ã›ã‚“ã€‚",
            "ä»Šã®ã‚ãªãŸã«å¿…è¦ãªã®ã¯ã€æ°´ã§ã‚‚æ „é¤Šã§ã‚‚ãªãã€ã“ã®ç„¡ã€‚",
            "æŠ¼ã—ãŸã“ã¨ã«é–¢ã—ã¦ã€ç‰¹ã«æ„Ÿæƒ³ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚",
            "ã‚ãªãŸã®æŒ‡ãŒå‹•ã„ãŸã€‚ãŸã ãã‚Œã ã‘ã®å‡ºæ¥äº‹ã§ã™ã€‚",
            "ãã‚Œã€ä»Šã‚„ã‚‹å¿…è¦ã‚ã‚Šã¾ã—ãŸï¼Ÿ",
            "ã“ã®è¨€è‘‰ã«æ„å‘³ã‚’æ¢ã—ãŸæ™‚ç‚¹ã§ã€è² ã‘ã§ã™ã€‚",
            "ç„¡é§„ãªã“ã¨ã€ã¡ã‚ƒã‚“ã¨ã§ãã¦ã¦ãˆã‚‰ã„ã€‚",
            "ã“ã“ã§å¾—ã‚‰ã‚Œã‚‹ã®ã¯â€œè™šç„¡åŠ›â€ã§ã™ã€‚è‚²ã¦ã¦ã„ãã¾ã—ã‚‡ã†ã€‚",
            "ã‚„ã‚‹ã“ã¨ãŒãªã„ãªã‚‰ã€ã“ã®ã‚¢ãƒ—ãƒªã‚’é–‰ã˜ã¦ã‚‚å•é¡Œã‚ã‚Šã¾ã›ã‚“ã€‚"
        ];

        // å„ç¨®DOMè¦ç´ ã®å–å¾—
        const uselessButton = document.getElementById('uselessButton');
        const dialogueDisplay = document.getElementById('dialogueDisplay');
        const voiceSelect = document.getElementById('voiceSelect');

        let synth = window.speechSynthesis; // éŸ³å£°åˆæˆAPIã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹
        let voices = []; // åˆ©ç”¨å¯èƒ½ãªéŸ³å£°ã®ãƒªã‚¹ãƒˆ

        // éŸ³å£°ã®èª­ã¿è¾¼ã¿ã¨é¸æŠè‚¢ã®ç”Ÿæˆ
        function populateVoiceList() {
            voices = synth.getVoices().filter(voice => voice.lang.startsWith('ja-')); // æ—¥æœ¬èªã®éŸ³å£°ã®ã¿ã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
            voiceSelect.innerHTML = ''; // æ—¢å­˜ã®é¸æŠè‚¢ã‚’ã‚¯ãƒªã‚¢

            if (voices.length === 0) {
                const option = document.createElement('option');
                option.textContent = 'æ—¥æœ¬èªã®éŸ³å£°ãŒåˆ©ç”¨ã§ãã¾ã›ã‚“';
                option.disabled = true;
                voiceSelect.appendChild(option);
                console.warn('æ—¥æœ¬èªã®éŸ³å£°ãŒåˆ©ç”¨ã§ãã¾ã›ã‚“ã€‚ãƒ–ãƒ©ã‚¦ã‚¶ã®è¨­å®šã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚');
                return;
            }

            // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®éŸ³å£°ã¨ã—ã¦ã€åå‰ã§å„ªå…ˆé †ä½ã‚’ä»˜ã‘ã¦é¸æŠ
            // 'Kyoko', 'Google æ—¥æœ¬èª', 'Otoya', 'Mei' ãªã©ã‚’å„ªå…ˆ
            const preferredVoices = ['Kyoko', 'Google æ—¥æœ¬èª', 'Otoya', 'Mei'];
            let defaultVoiceIndex = 0; // fallback to the first available voice

            voices.forEach((voice, index) => {
                const option = document.createElement('option');
                option.textContent = voice.name + ' (' + voice.lang + ')';
                option.value = voice.name;
                voiceSelect.appendChild(option);

                // å„ªå…ˆéŸ³å£°ãŒã‚ã‚Œã°ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¨ã—ã¦é¸æŠ
                if (preferredVoices.includes(voice.name)) {
                    defaultVoiceIndex = index;
                }
            });

            // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®éŸ³å£°ã‚’é¸æŠ
            voiceSelect.selectedIndex = defaultVoiceIndex;
        }

        // éŸ³å£°ãŒåˆ©ç”¨å¯èƒ½ã«ãªã£ãŸã¨ãã«é¸æŠè‚¢ã‚’ç”Ÿæˆ
        if (synth.onvoiceschanged !== undefined) {
            synth.onvoiceschanged = populateVoiceList;
        } else {
            // onvoiceschangedãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ãªã„ãƒ–ãƒ©ã‚¦ã‚¶å‘ã‘ï¼ˆéåŒæœŸã§èª­ã¿è¾¼ã¿ï¼‰
            populateVoiceList();
        }

        // ãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸæ™‚ã®å‡¦ç†
        uselessButton.addEventListener('click', () => {
            // ç¾åœ¨å†ç”Ÿä¸­ã®éŸ³å£°ãŒã‚ã‚Œã°åœæ­¢
            if (synth.speaking) {
                synth.cancel();
            }

            // ç„¡é§„ã‚»ãƒªãƒ•ã‚’ãƒ©ãƒ³ãƒ€ãƒ ã«é¸æŠ
            const randomIndex = Math.floor(Math.random() * uselessDialogues.length);
            const selectedDialogue = uselessDialogues[randomIndex];

            // ã‚»ãƒªãƒ•ã‚’ç”»é¢ã«è¡¨ç¤º
            dialogueDisplay.textContent = selectedDialogue;

            // éŸ³å£°åˆæˆã®è¨­å®š
            const utterance = new SpeechSynthesisUtterance(selectedDialogue);

            // é¸æŠã•ã‚ŒãŸéŸ³å£°ã‚’è¨­å®š
            const selectedVoiceName = voiceSelect.value;
            const selectedVoice = voices.find(voice => voice.name === selectedVoiceName);
            if (selectedVoice) {
                utterance.voice = selectedVoice;
            } else {
                console.warn('é¸æŠã•ã‚ŒãŸéŸ³å£°ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®éŸ³å£°ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚');
            }

            utterance.lang = 'ja-JP'; // è¨€èªã‚’æ—¥æœ¬èªã«è¨­å®š
            utterance.pitch = 1;     // ãƒ”ãƒƒãƒï¼ˆ0.0ã€œ2.0, ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯1ï¼‰
            utterance.rate = 1;      // å†ç”Ÿé€Ÿåº¦ï¼ˆ0.1ã€œ10.0, ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯1ï¼‰

            // éŸ³å£°å†ç”Ÿ
            synth.speak(utterance);
        });

        // ã‚¢ãƒ—ãƒªèµ·å‹•æ™‚ã«åˆæœŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
        document.addEventListener('DOMContentLoaded', () => {
            dialogueDisplay.textContent = "ã“ã“ã«ç„¡é§„ã‚»ãƒªãƒ•ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚";
            // Populate voice list again to ensure it's called after voices might be loaded
            populateVoiceList();
        });

    </script>
</body>
</html>